<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planning Schedule Page</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
    body {

        background-color: #e6f3ff;
        font-family: Arial, sans-serif;
        color: #3a5f8a;
        margin: 20px;
    }

    h1.main-title {
        font-family: 'Press Start 2P', cursive;
        color: #6cb6ff;
        text-align: center;
        text-shadow: 2px 2px #ffffff;
    }

    h1, h2 {
        color: #6cb6ff;
        text-align: center;
        text-shadow: 2px 2px #ffffff;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border: 2px solid #a8d4ff;
    }

    th, td {
        border: 1px solid #a8d4ff;
        padding: 5px;
        text-align: center;
    }

    textarea {
        width: 90%;
        height: 45px;
        border: 2px solid #fff4e6;
        background-color: #ffffffee;
        border-radius: 10px;
        padding: 6px;
        font-size: 15px;
        color: #3a5f8a;
        resize: none;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: 0.2s ease-in-out;
    }
    textarea:focus {
        outline: none;
        border-color: #ffd8ae;
        box-shadow: 0 0 6px #ffd8ae;
    }

    button {
        background-color: #94c9ff;
        border: none;
        padding: 10px 15px;
        color: white;
        cursor: pointer;
        border-radius: 8px;
        font-size: 14px;
    }

    button:hover {
        background-color: #6cb6ff;
    }

    .back-btn {
        padding: 12px 20px;
        font-size: 14px;
        font-family: 'Press Start 2P', cursive;
        background: #94c9ff;
        border: 3px solid #6cb6ff;
        color: white;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: 3px 3px 0 #6cb6ff;
        transition: 0.1s ease;
    }

    .back-btn:hover {
        background: #6cb6ff;
    }

    .back-btn:active {
        box-shadow: none;
        transform: translate(3px, 3px);
    }

    .section {
        margin-top: 30px;
        text-align: center;
    }

    .clear-btn {
        background-color: #ff8b8b;
        border: 3px solid #d66;
        box-shadow: 3px 3px 0 #d66;
        font-family: 'Press Start 2P', cursive;
        font-size: 12px;
        padding: 10px 15px;
    }
    .clear-btn:hover {
        background-color: #ff6b6b;
    }
    .clear-btn:active {
        transform: translate(3px,3px);
        box-shadow: none;
    }

    .btn-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 15px;
    }
</style>
</head>

<body>

<h1 class = "main-title">Welcome to Your Planner!</h1>

<h2>Plan your weekdays and weekend!</h2>

<table>
    <thead>
        <tr>
            <th>Time</th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
            <th>Saturday</th>
            <th>Sunday</th>
        </tr>
    </thead>
    <tbody id="scheduleBody">
        <tr>
            <td>05:00</td>
            <td><textarea></textarea></td>
            <td><textarea></textarea></td>
            <td><textarea></textarea></td>
            <td><textarea></textarea></td>
            <td><textarea></textarea></td>
            <td><textarea></textarea></td>
            <td><textarea></textarea></td>
        </tr>
    </tbody>
</table>

<div class="btn-row">
    <button onclick="addRow()">Add Time Row</button>
    <button onclick="clearAll()" class="clear-btn">Clear All</button>
</div>

<script>
    let currentHour = 5;

    function addRow() {
        if (currentHour >= 24) return;
        currentHour++;

        const tbody = document.getElementById("scheduleBody");
        const row = document.createElement("tr");
        row.innerHTML = `<td>${currentHour.toString().padStart(2,'0')}:00</td>` +
                        "<td><textarea></textarea></td>".repeat(7);
        tbody.appendChild(row);

        saveRowCount();
        loadSaved();
    }

    function saveRowCount() {
        const rows = document.querySelectorAll("#scheduleBody tr").length;
        localStorage.setItem("plannerRowCount", rows);
    }

    function rebuildRows() {
        const savedRows = parseInt(localStorage.getItem("plannerRowCount"));

        if (!savedRows || savedRows <= 1) return;

        currentHour = 5;
        for (let i = 1; i < savedRows; i++) {
            addRow();
        }
    }

    document.addEventListener("input", () => {
        const data = {};
        document.querySelectorAll("tbody textarea").forEach((box, index) => {
            data[index] = box.value;
        });
        localStorage.setItem("plannerData", JSON.stringify(data));
    });

    function loadSaved() {
        const saved = JSON.parse(localStorage.getItem("plannerData"));
        if (!saved) return;

        const textareas = document.querySelectorAll("tbody textarea");
        Object.keys(saved).forEach(key => {
            if (textareas[key]) textareas[key].value = saved[key];
        });
    }

    function clearAll() {
        const tbody = document.getElementById("scheduleBody");

        tbody.innerHTML = ` 
            <tr>
                <td>05:00</td>
                <td><textarea></textarea></td>
                <td><textarea></textarea></td>
                <td><textarea></textarea></td>
                <td><textarea></textarea></td>
                <td><textarea></textarea></td>
                <td><textarea></textarea></td>
                <td><textarea></textarea></td>
            </tr>
        `;

        currentHour = 5;

        localStorage.removeItem("plannerData");
        localStorage.removeItem("plannerRowCount");

        alert("Planner has been reset!");
    }

    window.onload = () => {
        rebuildRows();
        loadSaved();
    };
</script>

<div class="section">
    <h1>Main Goals of the Day!</h1>
    <textarea style="width:80%; height:60px;"></textarea>
</div>

<div class="section">
    <h1>Reminders of the Day!</h1>
    <textarea style="width:80%; height:60px;"></textarea>
</div>

<div style="text-align:center; margin-top:20px;">
    <a href="index.html">
        <button class="back-btn" type="button">Back</button>
    </a>
</div>

</body>
</html>
